(this.webpackJsonppresentation=this.webpackJsonppresentation||[]).push([[0],{10:function(e,t,n){e.exports=n(17)},15:function(e,t,n){},16:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(8),i=n.n(o),s=(n(15),n(16),n(1)),c=n(2),l=n(5),u=n(4),h=n(3),m=n(9),p=n(6),v=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={title:e.props.movie.title,year:e.props.movie.year,seen:e.props.movie.seen},e.handleSubmit=function(t){t.preventDefault();fetch("".concat("/api","/movies/").concat(e.props.movie._id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.state)}).then((function(e){return e.json()})).then((function(e){return console.log(e)})).then(e.props.toggleForm).then(e.props.refresh)},e.handleChange=function(t){e.setState(Object(p.a)({},t.target.name,t.target.value))},e}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{name:"title",type:"text",placeholder:"Movie Title",value:this.state.title,onChange:this.handleChange,required:!0}),r.a.createElement("input",{name:"year",type:"number",placeholder:"YYYY",value:this.state.year,onChange:this.handleChange}),r.a.createElement("input",{name:"seen",type:"text",placeholder:"Seen it?",value:this.state.seen,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"Update Movie"}))}}]),n}(r.a.Component),d=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={timesPressed:0},e.onPress=function(){var t=e.state.timesPressed,n=e.props,a=n.action,r=n.times;e.setState({timesPressed:t+1},(function(){e.state.timesPressed===r&&(a(),e.setState({timesPressed:0}))}))},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.state.timesPressed,t=this.props.dialog;return r.a.createElement("button",{level:e,onClick:this.onPress},t[e])}}]),n}(a.Component);d.defaultProps={times:2};var f=function(e){var t=e.movie,n=e.deleteMovies,o=e.refresh,i=Object(a.useState)(!1),s=Object(m.a)(i,2),c=s[0],l=s[1],u=function(){return l(!c)};return r.a.createElement("li",null,r.a.createElement("button",{onClick:function(){return u()}},"Update"),t.title,",",t.year,r.a.createElement(d,{dialog:["Delete","Confirm Delete"],action:function(){return n(t._id,o)}}),c?r.a.createElement(v,{movie:t,toggleForm:u,refresh:o}):"")},g=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={title:"",year:"",seen:""},e.handleSubmit=function(t){t.preventDefault();fetch("".concat("/api","/movies"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.state)}).then((function(e){return e.json()})).then((function(e){return console.log(e)})).then((function(){e.setState({title:"",year:"",seen:""})})).then(e.props.refresh)},e.handleChange=function(t){e.setState(Object(p.a)({},t.target.name,t.target.value))},e}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{name:"title",type:"text",placeholder:"Movie Title",value:this.state.title,onChange:this.handleChange,required:!0}),r.a.createElement("input",{name:"year",type:"number",placeholder:"YYYY",value:this.state.year,onChange:this.handleChange}),r.a.createElement("input",{name:"seen",type:"text",placeholder:"Seen it?",value:this.state.seen,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"Add Movie"}))}}]),n}(r.a.Component),b=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).deleteMovies=function(e,t){fetch("".concat("/api","/movies/").concat(e),{method:"DELETE"}).then((function(e){return e.json()})).then((function(e){console.log(e),t()}))},a.state={movies:[]},a.getMovies=a.getMovies.bind(Object(l.a)(a)),a}return Object(c.a)(n,[{key:"getMovies",value:function(){var e=this;fetch("".concat("/api","/movies")).then((function(e){return e.json()})).then((function(t){return e.setState({movies:t})}))}},{key:"componentDidMount",value:function(){this.getMovies()}},{key:"render",value:function(){var e=this,t=this.state.movies.map((function(t){return r.a.createElement(f,{key:t._id,movie:t,deleteMovies:e.deleteMovies,refresh:e.getMovies})}));return r.a.createElement("div",null,r.a.createElement("h2",null,"Simple-Crud Project"),r.a.createElement(g,{refresh:this.getMovies}),r.a.createElement("ul",null,t))}}]),n}(r.a.Component);var y=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(b,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[10,1,2]]]);
//# sourceMappingURL=main.2be1509e.chunk.js.map